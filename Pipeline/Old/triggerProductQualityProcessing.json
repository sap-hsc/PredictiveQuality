{"icon":"500px","description":"triggerProductQualityProcessing","processes":{"hdfsconsumer1":{"component":"com.sap.storage.hdfs.consumer","metadata":{"label":"HDFS Consumer","x":16,"y":12,"height":80,"width":120,"config":{"hadoopNamenode":"spark-hdfs-adapter:8020","path":"/process_image/","deleteAfterSend":true}}},"javascriptoperator1":{"component":"com.sap.system.jsengine","metadata":{"label":"JavaScript Operator","x":199.99999904632568,"y":12,"height":80,"width":120,"extensible":true,"config":{"script":"\n$.setPortCallback(\"input\",onInput);\n\nfunction onInput(ctx,s) {\n    thenum = s.match(/\\d+/)[0]; // Get current product nr\n    if (thenum === \"\")\n        thenum = 1006;\n    else\n        thenum = parseInt(thenum)+1;\n    $.output('/images/Product'+thenum+'.jpg');\n}"}}},"hdfsconsumer2":{"component":"com.sap.storage.hdfs.consumer","metadata":{"label":"HDFS Consumer","x":367.9999990463257,"y":12,"height":80,"width":120,"config":{"hadoopNamenode":"spark-hdfs-adapter:8020","path":"/images/"}}},"hdfsproducer1":{"component":"com.sap.storage.hdfs.producer","metadata":{"label":"HDFS Producer","x":551.9999980926514,"y":12,"height":80,"width":120,"config":{"hadoopNamenode":"spark-hdfs-adapter:8020","path":"/process_image/${storage.filename}"}}},"graphterminator1":{"component":"com.sap.util.graphTerminator","metadata":{"label":"Graph Terminator","x":719.9999980926514,"y":12,"height":80,"width":120,"config":{}}}},"groups":[],"connections":[{"metadata":{"points":"140,43 167.99999952316284,43 167.99999952316284,52 195.99999904632568,52"},"src":{"port":"outFilename","process":"hdfsconsumer1"},"tgt":{"port":"input","process":"javascriptoperator1"}},{"metadata":{"points":"323.9999990463257,52 363.9999990463257,52"},"src":{"port":"output","process":"javascriptoperator1"},"tgt":{"port":"inPath","process":"hdfsconsumer2"}},{"metadata":{"points":"491.9999990463257,61 519.9999985694885,61 519.9999985694885,52 547.9999980926514,52"},"src":{"port":"outFile","process":"hdfsconsumer2"},"tgt":{"port":"inFile","process":"hdfsproducer1"}},{"metadata":{"points":"675.9999980926514,52 715.9999980926514,52"},"src":{"port":"outFilename","process":"hdfsproducer1"},"tgt":{"port":"stop","process":"graphterminator1"}}],"inports":{},"outports":{},"properties":{}}